<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <title>电影的片长分布情况 - 直方图</title>
  <style>
    html, body { height: 100%; margin: 0; }
    #chart { width: 100%; height: 100vh; }
  </style>
  <!-- ECharts v5 CDN -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
</head>
<body>
  <div id="chart"></div>
  <script>
    // 在这里粘贴你的片长数组（单位：分钟）
    const durations = [
      98, 102, 115, 123, 110, 105, 94, 132, 140, 150, 160, 170, 125, 118, 111, 108,
      96, 100, 101, 99, 130, 128, 121, 119, 117, 90, 92, 88, 85, 135, 145, 155, 166
    ];

    // 生成直方图分箱数据（与常见 Matplotlib 用法一致：默认 15 个 bin）
    function buildHistogram(values, numBins = 15) {
      if (!values.length) return { labels: [], counts: [] };
      const minV = Math.min(...values);
      const maxV = Math.max(...values);
      const epsilon = 1e-6; // 右边界微扩，确保最大值落入最后一个箱
      const binWidth = (maxV - minV + epsilon) / numBins;
      const counts = new Array(numBins).fill(0);
      const edges = Array.from({ length: numBins + 1 }, (_, i) => minV + i * binWidth);
      values.forEach(v => {
        let idx = Math.floor((v - minV) / binWidth);
        if (idx >= numBins) idx = numBins - 1; // 保护右闭边界
        if (idx < 0) idx = 0;
        counts[idx]++;
      });
      const labels = [];
      for (let i = 0; i < numBins; i++) {
        const left = edges[i];
        const right = edges[i + 1];
        labels.push(`${left.toFixed(1)}-${right.toFixed(1)}`);
      }
      return { labels, counts };
    }

    const { labels, counts } = buildHistogram(durations, 15);

    const chart = echarts.init(document.getElementById('chart'));
    const option = {
      title: {
        text: '电影的片长分布情况',
        left: 'center',
        top: 8
      },
      grid: { left: 40, right: 20, top: 50, bottom: 40, containLabel: true },
      tooltip: {
        trigger: 'axis',
        axisPointer: { type: 'shadow' },
        formatter: (params) => {
          const p = params[0];
          return `区间：${p.axisValue}<br/>频数：${p.value}`;
        }
      },
      xAxis: {
        type: 'category',
        name: '片长',
        nameLocation: 'middle',
        nameGap: 28,
        data: labels,
        axisTick: { alignWithLabel: true },
        axisLabel: { interval: 0, rotate: 0 }
      },
      yAxis: {
        type: 'value',
        name: '频数',
        nameGap: 14,
        min: 0
      },
      series: [{
        type: 'bar',
        data: counts,
        barCategoryGap: '0%',
        barGap: '0%',
        itemStyle: {
          color: 'rgba(64, 224, 208, 0.85)',
          borderColor: 'rgba(64, 224, 208, 1)',
          borderWidth: 1
        }
      }]
    };
    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
  </script>
</body>
</html>


