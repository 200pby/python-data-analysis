<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>导演分析 - 电影数据分析系统</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .director-card {
            transition: transform 0.3s;
        }
        .director-card:hover {
            transform: translateY(-3px);
        }
        .table-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-film me-2"></i>电影数据分析系统
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/">首页</a>
                <a class="nav-link" href="/search">电影搜索</a>
                <a class="nav-link active" href="/directors">导演分析</a>
                <a class="nav-link" href="/genres">类型分析</a>
            </div>
        </div>
    </nav>

    <!-- 主要内容 -->
    <div class="container mt-4">
        <div class="table-container">
            <h4><i class="fas fa-user-tie me-2"></i>导演统计分析</h4>
            <p class="text-muted">按电影数量排序的导演统计信息</p>
            
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead class="table-primary">
                        <tr>
                            <th>导演</th>
                            <th>电影数量</th>
                            <th>平均评分</th>
                            <th>平均片长</th>
                            <th>平均票房（百万）</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for director in directors %}
                        <tr>
                            <td>
                                <strong>{{ director.Director }}</strong>
                            </td>
                            <td>
                                <span class="badge bg-primary">{{ director.电影数量 }}</span>
                            </td>
                            <td>
                                <span class="badge bg-warning text-dark">{{ director.平均评分 }}</span>
                            </td>
                            <td>
                                <span class="badge bg-info">{{ director.平均片长 }} min</span>
                            </td>
                            <td>
                                {% if director.平均票房_百万 > 0 %}
                                    <span class="badge bg-success">${{ director.平均票房_百万 }}</span>
                                {% else %}
                                    <span class="badge bg-secondary">N/A</span>
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            
            <!-- 导演统计卡片 -->
            <div class="row mt-4">
                <div class="col-md-3">
                    <div class="card director-card text-white bg-primary">
                        <div class="card-body text-center">
                            <h3>{{ directors|length }}</h3>
                            <p class="mb-0">总导演数</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card director-card text-white bg-success">
                        <div class="card-body text-center">
                            <h3>{{ (directors|selectattr('平均票房_百万', 'gt', 0)|list|length) }}</h3>
                            <p class="mb-0">有票房数据导演</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card director-card text-white bg-warning">
                        <div class="card-body text-center">
                            <h3>{{ (directors|selectattr('电影数量', 'gt', 1)|list|length) }}</h3>
                            <p class="mb-0">多部电影导演</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card director-card text-white bg-info">
                        <div class="card-body text-center">
                            <h3>{{ (directors|selectattr('平均评分', 'gt', 7.5)|list|length) }}</h3>
                            <p class="mb-0">高评分导演(>7.5)</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 导演排名 -->
            <div class="row mt-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h6><i class="fas fa-trophy me-2"></i>最多产导演 (Top 5)</h6>
                        </div>
                        <div class="card-body">
                            {% for director in directors[:5] %}
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <span>{{ director.Director }}</span>
                                <span class="badge bg-primary">{{ director.电影数量 }} 部</span>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h6><i class="fas fa-star me-2"></i>最高评分导演 (Top 5)</h6>
                        </div>
                        <div class="card-body">
                            {% for director in (directors|sort(attribute='平均评分', reverse=True))[:5] %}
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <span>{{ director.Director }}</span>
                                <span class="badge bg-warning text-dark">{{ director.平均评分 }}</span>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 页脚 -->
    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container text-center">
            <p class="mb-0">电影数据分析系统 &copy; 2024 - 基于第6章6.5案例电影数据分析</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>